{
  "apiVersion": "v1",
  "kind": "List",
  "items": [
    {
      "apiVersion": "extensions/v1beta1",
      "kind": "ThirdPartyResource",
      "metadata": {
        "name": "elasticsearch-cluster.enterprises.upmc.com"
      },
      "description": "Managed elasticsearch clusters",
      "versions": [
        {
          "name": "v1"
        }
      ]
    },
    {
      "apiVersion": "v1",
      "kind": "Namespace",
      "metadata": {
        "name": "kubestack"
      }
    },
    {
      "apiVersion": "v1",
      "kind": "ServiceAccount",
      "metadata": {
        "name": "elasticsearch-operator",
        "namespace": "kubestack"
      }
    },
    {
      "apiVersion": "rbac.authorization.k8s.io/v1beta1",
      "kind": "ClusterRole",
      "metadata": {
        "name": "elasticsearch-operator"
      },
      "rules": [
        {
          "apiGroups": [
            "enterprises.upmc.com"
          ],
          "resources": [
            "elasticsearchclusters"
          ],
          "verbs": [
            "*"
          ]
        },
        {
          "apiGroups": [
            "extensions"
          ],
          "resources": [
            "deployments"
          ],
          "verbs": [
            "list",
            "create",
            "get",
            "update"
          ]
        },
        {
          "apiGroups": [
            "extensions"
          ],
          "resources": [
            "thirdpartyresources"
          ],
          "verbs": [
            "create",
            "get",
            "update"
          ]
        },
        {
          "apiGroups": [
            "extensions"
          ],
          "resources": [
            "replicasets"
          ],
          "verbs": [
            "list",
            "delete"
          ]
        },
        {
          "apiGroups": [
            "extensions"
          ],
          "resources": [
            "storage.k8s.io"
          ],
          "verbs": [
            "get",
            "list",
            "create"
          ]
        },
        {
          "apiGroups": [
            "storage.k8s.io"
          ],
          "resources": [
            "storageclasses"
          ],
          "verbs": [
            "get",
            "create",
            "deletecollection"
          ]
        },
        {
          "apiGroups": [
            ""
          ],
          "resources": [
            "services"
          ],
          "verbs": [
            "create",
            "get",
            "update",
            "delete"
          ]
        },
        {
          "apiGroups": [
            "apps"
          ],
          "resources": [
            "statefulsets"
          ],
          "verbs": [
            "*"
          ]
        },
        {
          "apiGroups": [
            ""
          ],
          "resources": [
            "secrets"
          ],
          "verbs": [
            "list",
            "create",
            "get",
            "delete"
          ]
        },
        {
          "apiGroups": [
            ""
          ],
          "resources": [
            "pods"
          ],
          "verbs": [
            "list",
            "watch"
          ]
        },
        {
          "apiGroups": [
            "batch"
          ],
          "resources": [
            "cronjobs"
          ],
          "verbs": [
            "create",
            "delete"
          ]
        }
      ]
    },
    {
      "apiVersion": "rbac.authorization.k8s.io/v1beta1",
      "kind": "ClusterRoleBinding",
      "metadata": {
        "name": "elasticsearch-operator"
      },
      "roleRef": {
        "apiGroup": "rbac.authorization.k8s.io",
        "kind": "ClusterRole",
        "name": "elasticsearch-operator"
      },
      "subjects": [
        {
          "kind": "ServiceAccount",
          "name": "elasticsearch-operator",
          "namespace": "kubestack"
        }
      ]
    },
    {
      "apiVersion": "extensions/v1beta1",
      "kind": "Deployment",
      "metadata": {
        "labels": {
          "name": "elasticsearch-operator"
        },
        "name": "elasticsearch-operator",
        "namespace": "kubestack"
      },
      "spec": {
        "replicas": 1,
        "selector": {
          "matchLabels": {
            "name": "elasticsearch-operator"
          }
        },
        "template": {
          "metadata": {
            "labels": {
              "name": "elasticsearch-operator"
            }
          },
          "spec": {
            "containers": [
              {
                "name": "operator",
                "image": "upmcenterprises/elasticsearch-operator:0.0.5"
              }
            ],
            "serviceAccountName": "elasticsearch-operator"
          }
        }
      }
    },
    {
      "apiVersion": "enterprises.upmc.com/v1",
      "kind": "ElasticsearchCluster",
      "metadata": {
        "name": "es-ingestitron",
        "namespace": "ingestitron"
      },
      "spec": {
        "elastic-search-image": "upmcenterprises/docker-elasticsearch-kubernetes:5.3.1",
        "client-node-replicas": 3,
        "master-node-replicas": 3,
        "data-node-replicas": 10,
        "network-host": "_local_",
        "zones": [],
        "data-volume-size": "10Gi",
        "java-options": "-Xms256m -Xmx256m",
        "snapshot": {
          "scheduler-enabled": false,
          "bucket-name": "es-ingestitron-snapshots",
          "cron-schedule": "@every 2m"
        },
        "storage": {
          "type": "standard",
          "storage-class-version": "volume.alpha.kubernetes.io/storage-class"
        }
      }
    }
  ]
}
